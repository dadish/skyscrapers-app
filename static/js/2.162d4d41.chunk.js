webpackJsonp([2],{35:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NAME="skyscrapers",t.UPDATE_FILTER_KEYWORD="skyscrapers/Skyscrapers/UPDATE_FILTER_KEYWORD",t.AJAX_FETCH_START="skyscrapers/Skyscrapers/AJAX_FETCH_START",t.AJAX_FETCH_END="skyscrapers/Skyscrapers/AJAX_FETCH_END",t.AJAX_FETCH_FAIL="skyscrapers/Skyscrapers/AJAX_FETCH_FAIL",t.INITIAL_LOAD="skyscrapers/Skyscrapers/INITIAL_LOAD"},43:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NAME="cities",t.CHANGE_FILTER_TXT="skyscrapers/Cities/CHANGE_FILTER_TXT",t.AJAX_FETCH_START="skyscrapers/Cities/AJAX_FETCH_START",t.AJAX_FETCH_END="skyscrapers/Cities/AJAX_FETCH_END",t.AJAX_FETCH_FAIL="skyscrapers/Cities/AJAX_FETCH_FAIL",t.INITIAL_LOAD="skyscrapers/Cities/INITIAL_LOAD"},65:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NAME="images",t.AJAX_GET_IMAGES="skyscrapers/Images/AJAX_GET_IMAGES",t.AJAX_IMG_TTL_FETCH_START="skyscrapers/Images/AJAX_IMG_TTL_FETCH_START",t.AJAX_IMG_TTL_FETCH_END="skyscrapers/Images/AJAX_IMG_TTL_FETCH_END",t.AJAX_IMG_TTL_FETCH_FAIL="skyscrapers/Images/AJAX_IMG_TTL_FETCH_FAIL",t.AJAX_IMG_FETCH_START="skyscrapers/Images/AJAX_IMG_FETCH_START",t.AJAX_IMG_FETCH_END="skyscrapers/Images/AJAX_IMG_FETCH_END",t.AJAX_IMG_FETCH_FAIL="skyscrapers/Images/AJAX_IMG_FETCH_FAIL",t.WIKIPEDIA_API_URL="https://en.wikipedia.org/w/api.php?origin=*&formatversion=2&format=json&action=query"},94:function(e,t,r){"use strict";var s=r(13),n=r(275);s.Observable.prototype.switchMap=n.switchMap},96:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFilteredList=t.selectList=void 0;var s=r(24),n=r(187),i=t.selectList=function(){return(0,s.createSelector)((0,n.selectCities)(),function(e){return e.get("list")})};t.selectFilteredList=function(){return(0,s.createSelector)(i(),(0,n.selectFilterTxt)(),function(e,t){if(!t)return e;var r=new RegExp(t,"i");return e.filter(function(e){return r.test(e.get("title"))})})}},97:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(t,r){return{type:e,payload:t,meta:r}}};t.default=r},120:function(e,t,r){"use strict";var s=r(273);t.concat=s.concatStatic},127:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectImagelessWikipediaIds=t.selectList=void 0;var s=r(24),n=r(128),i=t.selectList=function(){return(0,s.createSelector)((0,n.selectSkyscrapers)(),function(e){return e.get("list")})};t.selectImagelessWikipediaIds=function(){return(0,s.createSelector)(i(),function(e){return e.filter(function(e){return!e.get("images")}).map(function(e){return e.get("wikipedia_id")})})}},128:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectLoading=t.selectSkyscrapers=void 0;var s=r(24),n=t.selectSkyscrapers=function(){return function(e){return e.get("skyscrapers")}};t.selectLoading=function(){return(0,s.createSelector)(n(),function(e){return e.get("loading")})}},172:function(e,t,r){"use strict";var s=r(13),n=r(272);s.Observable.prototype.catch=n._catch,s.Observable.prototype._catch=n._catch},173:function(e,t,r){"use strict";var s=r(271);t.ajax=s.AjaxObservable.create},187:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFilterTxt=t.selectCities=void 0;var s=r(24),n=t.selectCities=function(){return function(e){return e.get("cities")}};t.selectFilterTxt=function(){return(0,s.createSelector)(n(),function(e){return e.get("filterTxt")})}},188:function(e,t,r){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ajaxImageFetchFail=t.ajaxImageFetchEnd=t.ajaxImageFetchStart=t.ajaxImageTitleFetchFail=t.ajaxImageTitleFetchEnd=t.ajaxImageTitleFetchStart=t.ajaxGetImages=void 0;var i=r(97),a=n(i),o=r(65),c=s(o);t.ajaxGetImages=(0,a.default)(c.AJAX_GET_IMAGES),t.ajaxImageTitleFetchStart=(0,a.default)(c.AJAX_IMG_TTL_FETCH_START),t.ajaxImageTitleFetchEnd=(0,a.default)(c.AJAX_IMG_TTL_FETCH_END),t.ajaxImageTitleFetchFail=(0,a.default)(c.AJAX_IMG_TTL_FETCH_FAIL),t.ajaxImageFetchStart=(0,a.default)(c.AJAX_IMG_FETCH_START),t.ajaxImageFetchEnd=(0,a.default)(c.AJAX_IMG_FETCH_END),t.ajaxImageFetchFail=(0,a.default)(c.AJAX_IMG_FETCH_FAIL)},189:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectThumbnailForPage=t.selectImagelessPageTitles=t.selectImagelessPageIds=t.selectImages=t.thumbPlaceholder=void 0;var s=r(24),n=r(127),i=r(35),a=r(96),o=r(43),c=t.thumbPlaceholder="/sky-placeholder.png",u=t.selectImages=function(){return function(e){return e.get("images")}},l=function(e){if(e===i.NAME)return(0,n.selectList)();if(e===o.NAME)return(0,a.selectList)();throw new Error("Only '"+i.NAME+"' or '"+o.NAME+"' is supported by selectListSelector.")},p=(t.selectImagelessPageIds=function(e){return(0,s.createSelector)(l(e),u(),function(e,t){return e.reduce(function(e,r){var s=r.get("wikipedia_id"),n=t.find(function(e){return e.get("pageId")===s});return n&&n.get("url")||e.push(s),e},[])})},new RegExp("jpe?g$","i"));t.selectImagelessPageTitles=function(e){return(0,s.createSelector)(l(e),u(),function(e,t){return e.reduce(function(e,r){var s=r.get("wikipedia_id"),n=t.find(function(e){return e.get("pageId")===s&&(!e.get("url")&&!!p.test(e.get("title")))});return n&&e.push(n.get("title")),e},[])})},t.selectThumbnailForPage=function(e){return(0,s.createSelector)(u(),function(t){var r=t.find(function(t){return t.get("pageId")===e&&!!p.test(t.get("title"))});if(!r)return c;var s=r.get("thumburl");return s?s:c})}},270:function(e,t,r){"use strict";var s=r(13),n=r(122);s.Observable.prototype.map=n.map},271:function(e,t,r){"use strict";function s(){if(f.root.XMLHttpRequest)return new f.root.XMLHttpRequest;if(f.root.XDomainRequest)return new f.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function n(){if(f.root.XMLHttpRequest)return new f.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new f.root.ActiveXObject(e))break}catch(e){}return new f.root.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}function i(e,t){return void 0===t&&(t=null),new A({method:"GET",url:e,headers:t})}function a(e,t,r){return new A({method:"POST",url:e,body:t,headers:r})}function o(e,t){return new A({method:"DELETE",url:e,headers:t})}function c(e,t,r){return new A({method:"PUT",url:e,body:t,headers:r})}function u(e,t,r){return new A({method:"PATCH",url:e,body:t,headers:r})}function l(e,t){return new A({method:"GET",url:e,responseType:"json",headers:t}).lift(new y.MapOperator(function(e,t){return e.response},null))}var p=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},f=r(42),d=r(279),h=r(174),_=r(13),T=r(29),y=r(122);t.ajaxGet=i,t.ajaxPost=a,t.ajaxDelete=o,t.ajaxPut=c,t.ajaxPatch=u,t.ajaxGetJSON=l;var A=function(e){function t(t){e.call(this);var r={async:!0,createXHR:function(){return this.crossDomain?s.call(this):n()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);this.request=r}return p(t,e),t.prototype._subscribe=function(e){return new g(e,this.request)},t.create=function(){var e=function(e){return new t(e)};return e.get=i,e.post=a,e.delete=o,e.put=c,e.patch=u,e.getJSON=l,e}(),t}(_.Observable);t.AjaxObservable=A;var g=function(e){function t(t,r){e.call(this,t),this.request=r,this.done=!1;var s=r.headers=r.headers||{};r.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in s||f.root.FormData&&r.body instanceof f.root.FormData||"undefined"==typeof r.body||(s["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=this.serializeBody(r.body,r.headers["Content-Type"]),this.send()}return p(t,e),t.prototype.next=function(e){this.done=!0;var t=this,r=t.xhr,s=t.request,n=t.destination,i=new b(e,r,s);n.next(i)},t.prototype.send=function(){var e=this,t=e.request,r=e.request,s=r.user,n=r.method,i=r.url,a=r.async,o=r.password,c=r.headers,u=r.body,l=t.createXHR,p=d.tryCatch(l).call(t);if(p===h.errorObject)this.error(h.errorObject.e);else{this.xhr=p,this.setupEvents(p,t);var f=void 0;if(f=s?d.tryCatch(p.open).call(p,n,i,a,s,o):d.tryCatch(p.open).call(p,n,i,a),f===h.errorObject)return this.error(h.errorObject.e),null;if(p.timeout=t.timeout,p.responseType=t.responseType,"withCredentials"in p&&(p.withCredentials=!!t.withCredentials),this.setHeaders(p,c),f=u?d.tryCatch(p.send).call(p,u):d.tryCatch(p.send).call(p),f===h.errorObject)return this.error(h.errorObject.e),null}return p},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(f.root.FormData&&e instanceof f.root.FormData)return e;if(t){var r=t.indexOf(";");r!==-1&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.setupEvents=function(e,t){function r(e){var t=r,s=t.subscriber,n=t.progressSubscriber,i=t.request;n&&n.error(e),s.error(new v(this,i))}function s(e){var t=s,r=t.subscriber,n=t.progressSubscriber,i=t.request;if(4===this.readyState){var a=1223===this.status?204:this.status,o="text"===this.responseType?this.response||this.responseText:this.response;0===a&&(a=o?200:0),200<=a&&a<300?(n&&n.complete(),r.next(e),r.complete()):(n&&n.error(e),r.error(new m("ajax error "+a,this,i)))}}var n=t.progressSubscriber;if(e.ontimeout=r,r.request=t,r.subscriber=this,r.progressSubscriber=n,e.upload&&"withCredentials"in e){if(n){var i;i=function(e){var t=i.progressSubscriber;t.next(e)},f.root.XDomainRequest?e.onprogress=i:e.upload.onprogress=i,i.progressSubscriber=n}var a;a=function(e){var t=a,r=t.progressSubscriber,s=t.subscriber,n=t.request;r&&r.error(e),s.error(new m("ajax error",this,n))},e.onerror=a,a.request=t,a.subscriber=this,a.progressSubscriber=n}e.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=n,s.request=t},t.prototype.unsubscribe=function(){var t=this,r=t.done,s=t.xhr;!r&&s&&4!==s.readyState&&"function"==typeof s.abort&&s.abort(),e.prototype.unsubscribe.call(this)},t}(T.Subscriber);t.AjaxSubscriber=g;var b=function(){function e(e,t,r){switch(this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.responseType){case"json":"response"in t?this.response=t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):this.response=JSON.parse(t.responseText||"null");break;case"xml":this.response=t.responseXML;break;case"text":default:this.response="response"in t?t.response:t.responseText}}return e}();t.AjaxResponse=b;var m=function(e){function t(t,r,s){e.call(this,t),this.message=t,this.xhr=r,this.request=s,this.status=r.status}return p(t,e),t}(Error);t.AjaxError=m;var v=function(e){function t(t,r){e.call(this,"ajax timeout",t,r)}return p(t,e),t}(m);t.AjaxTimeoutError=v},272:function(e,t,r){"use strict";function s(e){var t=new o(e),r=this.lift(t);return t.caught=r}var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(117),a=r(123);t._catch=s;var o=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.selector,this.caught))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.selector=r,this.caught=s}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(a.subscribeToResult(this,r))}},t}(i.OuterSubscriber)},273:function(e,t,r){"use strict";function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(n.apply(void 0,[this].concat(e)))}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,s=e;return a.isScheduler(s[e.length-1])&&(r=s.pop()),null===r&&1===e.length&&e[0]instanceof i.Observable?e[0]:new o.ArrayObservable(e,r).lift(new c.MergeAllOperator(1))}var i=r(13),a=r(176),o=r(119),c=r(274);t.concat=s,t.concatStatic=n},309:function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=s(n),a=r(34),o=a.Grid.Column,c=function(e){var t=e.children;return i.default.createElement(a.Grid,{columns:"equal",centered:!0},i.default.createElement(o,{width:12},t))};t.default=c},310:function(e,t,r){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.imageUrlsEpic=t.imageTitlesEpic=t.fetchWikipediaApi=void 0,r(270),r(172),r(94);var n=r(173),i=r(120),a=r(121),o=r(170),c=r(65),u=s(c),l=r(188),p=s(l),f=r(189),d=t.fetchWikipediaApi=function(e){return(0,n.ajax)({url:""+u.WIKIPEDIA_API_URL+e,withCredentials:!1,crossDomain:!0,method:"GET",headers:{"Api-User-Agent":"nurguly.ashyrov@gmail.com"},responseType:"json"})},h=t.imageTitlesEpic=function(e,t){return e.ofType(u.AJAX_GET_IMAGES).switchMap(function(e){var r=(0,f.selectImagelessPageIds)(e.payload)(t.getState()),s="&pageids="+r.join("|")+"&prop=images&imlimit=500";return(0,i.concat)((0,a.of)(p.ajaxImageTitleFetchStart()),d(s).map(function(t){return p.ajaxImageTitleFetchEnd(t.response.query.pages,{name:e.payload})}).catch(function(e){return(0,a.of)(p.ajaxImageTitleFetchFail(e))}))})},_=t.imageUrlsEpic=function(e,t){return e.ofType(u.AJAX_IMG_TTL_FETCH_END).switchMap(function(e){var r=(0,f.selectImagelessPageTitles)(e.meta.name)(t.getState()),s="&titles="+r.join("|")+"&prop=imageinfo&iiprop=url&iilimit=30&iiurlwidth=300";return(0,i.concat)((0,a.of)(p.ajaxImageFetchStart()),d(s).map(function(e){return p.ajaxImageFetchEnd(e.response.query.pages)}).catch(function(e){return(0,a.of)(p.ajaxImageFetchFail(e))}))})};t.default=(0,o.combineEpics)(h,_)},311:function(e,t,r){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var n=r(21),i=r(175),a=r(65),o=s(a),c=t.initialState=new n.List,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1],r=t.type,s=t.payload;switch(r){case o.AJAX_IMG_TTL_FETCH_END:return s.reduce(function(e,t){var r=t.pageid;return t.images&&(0,i.isArray)(t.images)?t.images.reduce(function(e,t){var s=t.title;return e.push(new n.Map({pageId:r,title:s}))},e):e},e);case o.AJAX_IMG_FETCH_END:return s.reduce(function(e,t){var r=e.findIndex(function(e){return e.get("title")===t.title});return r!==-1&&(0,i.isArray)(t.imageinfo)?e.set(r,e.get(r).merge(t.imageinfo[0])):e},e);default:return e}};t.default=u}});
//# sourceMappingURL=2.162d4d41.chunk.js.map
webpackJsonp([1],{49:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NAME="skyscrapers",t.UPDATE_FILTER_KEYWORD="skyscrapers/Skyscrapers/UPDATE_FILTER_KEYWORD",t.AJAX_FETCH_START="skyscrapers/Skyscrapers/AJAX_FETCH_START",t.AJAX_FETCH_END="skyscrapers/Skyscrapers/AJAX_FETCH_END",t.AJAX_FETCH_FAIL="skyscrapers/Skyscrapers/AJAX_FETCH_FAIL",t.INITIAL_LOAD="skyscrapers/Skyscrapers/INITIAL_LOAD",t.ACTIVATE_ITEM="skyscrapers/Skyscrapers/ACTIVATE_ITEM",t.DEACTIVATE_ITEM="skyscrapers/Skyscrapers/DEACTIVATE_ITEM"},64:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NAME="cities",t.CHANGE_FILTER_TXT="skyscrapers/Cities/CHANGE_FILTER_TXT",t.AJAX_FETCH_START="skyscrapers/Cities/AJAX_FETCH_START",t.AJAX_FETCH_END="skyscrapers/Cities/AJAX_FETCH_END",t.AJAX_FETCH_FAIL="skyscrapers/Cities/AJAX_FETCH_FAIL",t.INITIAL_LOAD="skyscrapers/Cities/INITIAL_LOAD"},94:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var a=n(1),s=o(a),u=n(47),l=n(182),c=r(l);n(205);var p=function(e){var t=e.children,n=e.style,r=e.raise,o=i(e,["children","style","raise"]);return r=r||0,s.default.createElement(u.Segment,Object.assign({className:"sgmnt",style:Object.assign({},c.flatBox,c["elevation"+r],n)},o),t)},f=function(e){var t=e.children,n=e.style,r=e.raise,o=i(e,["children","style","raise"]);return r=r||0,s.default.createElement(u.Segment.Group,Object.assign({className:"sgmnt",style:Object.assign({},c.flatBox,c["elevation"+r],n)},o),t)};t.Group=f,p.Group=f,t.default=p},95:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NAME="images",t.AJAX_GET_IMAGES="skyscrapers/Images/AJAX_GET_IMAGES",t.AJAX_IMG_TTL_FETCH_START="skyscrapers/Images/AJAX_IMG_TTL_FETCH_START",t.AJAX_IMG_TTL_FETCH_END="skyscrapers/Images/AJAX_IMG_TTL_FETCH_END",t.AJAX_IMG_TTL_FETCH_FAIL="skyscrapers/Images/AJAX_IMG_TTL_FETCH_FAIL",t.AJAX_IMG_FETCH_START="skyscrapers/Images/AJAX_IMG_FETCH_START",t.AJAX_IMG_FETCH_END="skyscrapers/Images/AJAX_IMG_FETCH_END",t.AJAX_IMG_FETCH_FAIL="skyscrapers/Images/AJAX_IMG_FETCH_FAIL",t.WIKIPEDIA_API_URL="https://en.wikipedia.org/w/api.php?origin=*&formatversion=2&format=json&action=query"},117:function(e,t,n){"use strict";var r=n(16),o=n(473);r.Observable.prototype.switchMap=o.switchMap},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectSanitizedLocationQuery=t.selectFilterUrl=t.selectFilterSelector=t.selectFilterValues=t.selectCityOptions=t.selectYearOptions=t.selectFloorsOptions=t.selectHeightOptions=void 0;var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(21),i=n(1070),a=n(29),s=n(261),u=n(183),l=n(119),c=t.selectHeightOptions=function(){return function(){return[{key:"any",text:"Any",value:""},{key:"0-250",text:"0-250 ft.",value:"0-250",min:0,max:250},{key:"250-500",text:"250-500 ft.",value:"250-500",min:250,max:500},{key:"500-750",text:"500-750 ft.",value:"500-750",min:500,max:750},{key:"750-1000",text:"750-1000 ft.",value:"750-1000",min:750,max:1e3},{key:"1000+",text:"1000+ ft.",value:"1000-",min:1e3}]}},p=t.selectFloorsOptions=function(){return function(){return[{key:"any",text:"Any",value:""},{key:"0-20",text:"0-20 floors",value:"0-20",min:0,max:20},{key:"20-40",text:"20-40 floors",value:"20-40",min:20,max:40},{key:"40-60",text:"40-60 floors",value:"40-60",min:40,max:60},{key:"60-80",text:"60-80 floors",value:"60-80",min:60,max:80},{key:"80+",text:"80+ floors",value:"80-",min:80}]}},f=t.selectYearOptions=function(){return function(){for(var e=[{key:"any",text:"Any",value:""}],t=1850;t<=2010;t+=10)e.push({key:t,text:t+"s",value:String(t)});return e}},d=(t.selectCityOptions=function(){return(0,a.createSelector)((0,u.selectList)(),function(e){return e.map(function(e){return{key:e.get("id"),text:e.get("title"),value:e.get("id")}}).toJS()})},t.selectFilterValues=function(){return function(e){return(0,s.formValueSelector)("filter")(e,"keyword","cities","height","floors","year")}}),h=function(e){var t=e.keyword,n=e.cities,o=e.height,i=e.floors,a=e.year,s=", sort=random";if(t&&(s+=", title|body%="+t),n.size&&(s+=", parent="+n.join("|")),o){var u=o.split("-"),l=r(u,2),c=l[0],p=l[1];c&&(s+=", height>="+c),p&&(s+=", height<="+p)}if(i){var f=i.split("-"),d=r(f,2),h=d[0],_=d[1];h&&(s+=", floors>="+h),_&&(s+=", floors<="+_)}return a&&(s+=", year>="+a+", year<="+(Number(a)+9)),s.substr(2)};t.selectFilterSelector=function(){return(0,a.createSelector)(d(),h)},t.selectFilterUrl=function(){return(0,a.createSelector)((0,l.selectLocationPathname)(),d(),function(e,t){var n=Object.keys(t),r=n.reduce(function(e,n){var r="cities"===n?t[n].join("|"):t[n];return r&&(e+=n+"="+r+"&"),e},"");r&&(r=r.substr(0,r.length-1));var o=e;return r&&(o+="?"+r),o})},t.selectSanitizedLocationQuery=function(){return(0,a.createSelector)((0,l.selectLocation)(),c(),p(),f(),function(e,t,n,r){return["keyword","cities","height","floors","year"].reduce(function(e,a){var s=e.get(a);s instanceof o.List&&(s=s.join("|"));var u=void 0;if(!s)return e;switch(a){case"keyword":return e.set(a,String(s));case"cities":var l=s.split("|"),c=l.filter(function(e){return(0,i.isNumeric)(e)});return e.set(a,c.join("|"));case"height":return u=t.find(function(e){return e.value===s})||"",e.set(a,u.value);case"floors":return u=n.find(function(e){return e.value===s})||"",e.set(a,u.value);case"year":return u=r.find(function(e){return e.value===s})||"",e.set(a,u.value);default:return e}},e.get("query"))})}},121:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateItem=t.activateItem=t.initialLoad=t.ajaxFetchFail=t.ajaxFetchEnd=t.ajaxFetchStart=void 0;var i=n(186),a=o(i),s=n(49),u=r(s);t.ajaxFetchStart=(0,a.default)(u.AJAX_FETCH_START),t.ajaxFetchEnd=(0,a.default)(u.AJAX_FETCH_END),t.ajaxFetchFail=(0,a.default)(u.AJAX_FETCH_FAIL),t.initialLoad=(0,a.default)(u.INITIAL_LOAD),t.activateItem=(0,a.default)(u.ACTIVATE_ITEM),t.deactivateItem=(0,a.default)(u.DEACTIVATE_ITEM)},169:function(e,t,n){"use strict";var r=n(1057);t.concat=r.concatStatic},183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFilteredList=t.selectList=void 0;var r=n(29),o=n(579),i=t.selectList=function(){return(0,r.createSelector)((0,o.selectCities)(),function(e){return e.get("list")})};t.selectFilteredList=function(){return(0,r.createSelector)(i(),(0,o.selectFilterTxt)(),function(e,t){if(!t)return e;var n=new RegExp(t,"i");return e.filter(function(e){return n.test(e.get("title"))})})}},184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectImagelessWikipediaIds=t.selectList=void 0;var r=n(29),o=n(185),i=t.selectList=function(){return(0,r.createSelector)((0,o.selectSkyscrapers)(),function(e){return e.get("list")})};t.selectImagelessWikipediaIds=function(){return(0,r.createSelector)(i(),function(e){return e.filter(function(e){return!e.get("images")}).map(function(e){return e.get("wikipedia_id")})})}},185:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectLoading=t.selectSkyscrapers=void 0;var r=n(29),o=t.selectSkyscrapers=function(){return function(e){return e.get("skyscrapers")}};t.selectLoading=function(){return(0,r.createSelector)(o(),function(e){return e.get("loading")})}},186:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return function(t,n){return{type:e,payload:t,meta:n}}};t.default=n},203:function(e,t,n){t=e.exports=n(125)(),t.push([e.id,".sgmnt{-webkit-transition:all .12s ease-in-out;transition:all .12s ease-in-out}",""])},205:[1151,203],266:function(e,t,n){"use strict";var r=n(16),o=n(1056);r.Observable.prototype.catch=o._catch,r.Observable.prototype._catch=o._catch},268:function(e,t,n){"use strict";var r=n(1054);t.ajax=r.AjaxObservable.create},302:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(165),i=n(575),a=r(i),s=(0,o.combineEpics)(a.default,i.listMoreCities);t.default=s},303:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(21),i=n(576),a=r(i),s=n(64),u=t.initialState=(0,o.fromJS)({list:i.initialState,filterTxt:""}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1],n=t.type,r=t.payload;switch(n){case s.AJAX_FETCH_END:return e.set("list",(0,a.default)(e.get("list"),t));case s.CHANGE_FILTER_TXT:return e.set("filterTxt",r);default:return e}};t.default=l},304:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ajaxImageFetchFail=t.ajaxImageFetchEnd=t.ajaxImageFetchStart=t.ajaxImageTitleFetchFail=t.ajaxImageTitleFetchEnd=t.ajaxImageTitleFetchStart=t.ajaxGetImages=void 0;var i=n(186),a=o(i),s=n(95),u=r(s);t.ajaxGetImages=(0,a.default)(u.AJAX_GET_IMAGES),t.ajaxImageTitleFetchStart=(0,a.default)(u.AJAX_IMG_TTL_FETCH_START),t.ajaxImageTitleFetchEnd=(0,a.default)(u.AJAX_IMG_TTL_FETCH_END),t.ajaxImageTitleFetchFail=(0,a.default)(u.AJAX_IMG_TTL_FETCH_FAIL),t.ajaxImageFetchStart=(0,a.default)(u.AJAX_IMG_FETCH_START),t.ajaxImageFetchEnd=(0,a.default)(u.AJAX_IMG_FETCH_END),t.ajaxImageFetchFail=(0,a.default)(u.AJAX_IMG_FETCH_FAIL)},305:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.imageUrlsEpic=t.imageTitlesEpic=t.fetchWikipediaApi=void 0,n(465),n(266),n(117);var o=n(268),i=n(169),a=n(118),s=n(165),u=n(95),l=r(u),c=n(304),p=r(c),f=n(307),d=t.fetchWikipediaApi=function(e){return(0,o.ajax)({url:""+l.WIKIPEDIA_API_URL+e,withCredentials:!1,crossDomain:!0,method:"GET",headers:{"Api-User-Agent":"nurguly.ashyrov@gmail.com"},responseType:"json"})},h=t.imageTitlesEpic=function(e,t){return e.ofType(l.AJAX_GET_IMAGES).switchMap(function(e){var n=(0,f.selectImagelessPageIds)(e.payload)(t.getState()),r="&pageids="+n.join("|")+"&prop=images&imlimit=500";return(0,i.concat)((0,a.of)(p.ajaxImageTitleFetchStart()),d(r).map(function(t){return p.ajaxImageTitleFetchEnd(t.response.query.pages,{name:e.payload})}).catch(function(e){return(0,a.of)(p.ajaxImageTitleFetchFail(e))}))})},_=t.imageUrlsEpic=function(e,t){return e.ofType(l.AJAX_IMG_TTL_FETCH_END).switchMap(function(e){var n=(0,f.selectImagelessPageTitles)(e.meta.name)(t.getState()),r="&titles="+n.join("|")+"&prop=imageinfo&iiprop=url&iilimit=30&iiurlwidth=300";return(0,i.concat)((0,a.of)(p.ajaxImageFetchStart()),d(r).map(function(e){return p.ajaxImageFetchEnd(e.response.query.pages)}).catch(function(e){return(0,a.of)(p.ajaxImageFetchFail(e))}))})};t.default=(0,s.combineEpics)(h,_)},306:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(21),i=n(170),a=n(95),s=r(a),u=t.initialState=new o.List,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1],n=t.type,r=t.payload;switch(n){case s.AJAX_IMG_TTL_FETCH_END:return r.reduce(function(e,t){var n=t.pageid;return t.images&&(0,i.isArray)(t.images)?t.images.reduce(function(e,t){var r=t.title;return e.push(new o.Map({pageId:n,title:r}))},e):e},e);case s.AJAX_IMG_FETCH_END:return r.reduce(function(e,t){var n=e.findIndex(function(e){return e.get("title")===t.title});return n!==-1&&(0,i.isArray)(t.imageinfo)?e.set(n,e.get(n).merge(t.imageinfo[0])):e},e);default:return e}};t.default=l},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectThumbnailForPage=t.selectImagelessPageTitles=t.selectImagelessPageIds=t.selectImages=t.thumbPlaceholder=void 0;var r=n(29),o=n(184),i=n(49),a=n(183),s=n(64),u=t.thumbPlaceholder="/sky-placeholder.png",l=t.selectImages=function(){return function(e){return e.get("images")}},c=function(e){if(e===i.NAME)return(0,o.selectList)();if(e===s.NAME)return(0,a.selectList)();throw new Error("Only '"+i.NAME+"' or '"+s.NAME+"' is supported by selectListSelector.")},p=(t.selectImagelessPageIds=function(e){return(0,r.createSelector)(c(e),l(),function(e,t){return e.reduce(function(e,n){var r=n.get("wikipedia_id"),o=t.find(function(e){return e.get("pageId")===r});return o&&o.get("url")||e.push(r),e},[])})},new RegExp("jpe?g$","i"));t.selectImagelessPageTitles=function(e){return(0,r.createSelector)(c(e),l(),function(e,t){return e.reduce(function(e,n){var r=n.get("wikipedia_id"),o=t.find(function(e){return e.get("pageId")===r&&(!e.get("url")&&!!p.test(e.get("title")))});return o&&e.push(o.get("title")),e},[])})},t.selectThumbnailForPage=function(e){return(0,r.createSelector)(l(),function(t){var n=t.find(function(t){return t.get("pageId")===e&&!!p.test(t.get("title"))});if(!n)return u;var r=n.get("thumburl");return r?r:u})}},309:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(165),i=n(581),a=r(i),s=n(583),u=r(s),l=(0,o.combineEpics)(u.default,a.default,s.initFilterForm);t.default=l},310:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(587),s=r(a),u=n(582),l=r(u),c=n(591),p=r(c),f=function(){return i.default.createElement("div",{style:{padding:"1rem",paddingRight:"50%",paddingTop:"1rem"}},i.default.createElement(l.default,null),i.default.createElement(s.default,null),i.default.createElement(p.default,null))};t.default=f},311:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n(21),a=n(589),s=o(a),u=n(61),l=n(49),c=r(l),p=t.initialState=(0,i.fromJS)({list:a.initialState,loading:!1,filterOn:!1,filter:{keyword:"",city:[],heightMin:!1,heigthMax:!1,floorsMin:!1,floorsMax:!1,yearMin:!1,yearMax:!1}}),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1],n=t.type,r=t.payload;switch(n){case c.AJAX_FETCH_START:return e.set("loading",!0);case c.AJAX_FETCH_END:return e=e.set("loading",!1),e.set("list",(0,s.default)(e.get("list"),t));case c.ACTIVATE_ITEM:case c.DEACTIVATE_ITEM:return e.set("list",(0,s.default)(e.get("list"),t));case c.AJAX_FETCH_FAIL:return e.set("loading",!1);case u.LOCATION_CHANGE:if("POP"!==r.action)return e;var o=r.query.keyword||"";return e.set("keyword",o);default:return e}};t.default=f},329:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),p=n(101),f=r(p),d=n(332),h=r(d),_={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},m={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._getState=function(){return{children:n.props.dispatcher.getChildren(),updateCounter:n.props.dispatcher.getUpdateCounter()}},n._onChangeHandler=function(){if(n.dimesionsCache_){var e=(n.state.children||[]).length,t=n._getState();n.setState(t,function(){return(t.children||[]).length!==e&&n._onMouseChangeHandler()})}},n._onChildClick=function(){if(n.props.onChildClick&&n.hoverChildProps_){var e=n.hoverKey_,t=n.hoverChildProps_;n.props.onChildClick(e,t)}},n._onChildMouseDown=function(){if(n.props.onChildMouseDown&&n.hoverChildProps_){var e=n.hoverKey_,t=n.hoverChildProps_;n.props.onChildMouseDown(e,t)}},n._onChildMouseEnter=function(e,t){n.dimesionsCache_&&(n.props.onChildMouseEnter&&n.props.onChildMouseEnter(e,t),n.hoverChildProps_=t,n.hoverKey_=e,n.setState({hoverKey:e}))},n._onChildMouseLeave=function(){if(n.dimesionsCache_){var e=n.hoverKey_,t=n.hoverChildProps_;void 0!==e&&null!==e&&(n.props.onChildMouseLeave&&n.props.onChildMouseLeave(e,t),n.hoverKey_=null,n.hoverChildProps_=null,n.setState({hoverKey:null}))}},n._onMouseAllow=function(e){e||n._onChildMouseLeave(),n.allowMouse_=e},n._onMouseChangeHandler=function(){n.allowMouse_&&n._onMouseChangeHandler_raf()},n._onMouseChangeHandler_raf=function(){if(n.dimesionsCache_){var e=n.props.dispatcher.getMousePosition();if(e){var t=[],r=n.props.getHoverDistance();if(c.default.Children.forEach(n.state.children,function(o,i){if(o&&(void 0!==o.props.latLng||void 0!==o.props.lat||void 0!==o.props.lng)){var a=void 0!==o.key&&null!==o.key?o.key:i,s=n.props.distanceToMouse(n.dimesionsCache_[a],e,o.props);s<r&&t.push({key:a,dist:s,props:o.props})}}),t.length){t.sort(function(e,t){return e.dist-t.dist});var o=t[0].key,i=t[0].props;n.hoverKey_!==o&&(n._onChildMouseLeave(),n._onChildMouseEnter(o,i))}else n._onChildMouseLeave()}else n._onChildMouseLeave()}},n._getDimensions=function(e){var t=e;return n.dimesionsCache_[t]},n.props.dispatcher.on("kON_CHANGE",n._onChangeHandler),n.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",n._onMouseChangeHandler),n.props.dispatcher.on("kON_CLICK",n._onChildClick),n.props.dispatcher.on("kON_MDOWN",n._onChildMouseDown),n.dimesionsCache_={},n.hoverKey_=null,n.hoverChildProps_=null,n.allowMouse_=!0,n.state=s({},n._getState(),{hoverKey:null}),n}return a(t,e),u(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.experimental===!0?!(0,f.default)(this.props,e)||!(0,f.default)((0,h.default)(this.state,["hoverKey"]),(0,h.default)(t,["hoverKey"])):!(0,f.default)(this.props,e)||!(0,f.default)(this.state,t)}},{key:"componentWillUnmount",value:function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimesionsCache_=null}},{key:"render",value:function(){var e=this,t=this.props.style||_;this.dimesionsCache_={};var n=c.default.Children.map(this.state.children,function(t,n){if(t){if(void 0===t.props.latLng&&void 0===t.props.lat&&void 0===t.props.lng)return c.default.cloneElement(t,{$geoService:e.props.geoService,$onMouseAllow:e._onMouseAllow,$prerender:e.props.prerender});var r=void 0!==t.props.latLng?t.props.latLng:{lat:t.props.lat,lng:t.props.lng},o=e.props.geoService.project(r,e.props.projectFromLeftTop),i={left:o.x,top:o.y},a=0,u=0;e.props.projectFromLeftTop||e.props.geoService.hasSize()&&(a=e.props.geoService.getWidth()/2,u=e.props.geoService.getHeight()/2);var l=void 0!==t.key&&null!==t.key?t.key:n;return e.dimesionsCache_[l]=s({x:o.x+a,y:o.y+u},r),c.default.createElement("div",{key:l,style:s({},m,i),className:t.props.$markerHolderClassName},c.default.cloneElement(t,{$hover:l===e.state.hoverKey,$getDimensions:e._getDimensions,$dimensionKey:l,$geoService:e.props.geoService,$onMouseAllow:e._onMouseAllow,$prerender:e.props.prerender}))}});return c.default.createElement("div",{style:t},n)}}]),t}(l.Component);y.propTypes={geoService:l.PropTypes.any,style:l.PropTypes.any,distanceToMouse:l.PropTypes.func,dispatcher:l.PropTypes.any,onChildClick:l.PropTypes.func,onChildMouseDown:l.PropTypes.func,onChildMouseLeave:l.PropTypes.func,onChildMouseEnter:l.PropTypes.func,getHoverDistance:l.PropTypes.func,projectFromLeftTop:l.PropTypes.bool,prerender:l.PropTypes.bool},y.defaultProps={projectFromLeftTop:!1,prerender:!1},t.default=y},330:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(331),a=function(){function e(t,n){if(r(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n}return o(e,[{key:"wrap",value:function(){return new e(this.lat,(0,i.wrap)(this.lng,-180,180))}}]),e}();a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):"lng"in e&&"lat"in e?new a(e.lat,e.lng):e},t.default=a},331:function(e,t){"use strict";function n(e,t,n){var r=n-t;return e===n?e:((e-t)%r+r)%r+t}Object.defineProperty(t,"__esModule",{value:!0}),t.wrap=n},332:function(e,t){"use strict";function n(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){for(var r=n(e,[]),o=0;o<t.length;o++){var i=t[o];r.hasOwnProperty(i)&&delete r[i]}return r};t.default=r},404:function(e,t){"use strict";function n(e,t){this.x=e,this.y=t}e.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,o=n*this.x+t*this.y;return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(e){return e instanceof n?e:Array.isArray(e)?new n(e[0],e[1]):e}},453:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.values=t.untouch=t.unregisterField=t.touch=t.SubmissionError=t.submit=t.stopSubmit=t.stopAsyncValidation=t.startSubmit=t.startAsyncValidation=t.setSubmitSucceeded=t.setSubmitFailed=t.reset=t.registerField=t.reduxForm=t.reducer=t.propTypes=t.hasSubmitFailed=t.hasSubmitSucceeded=t.isSubmitting=t.isValid=t.isPristine=t.isInvalid=t.isDirty=t.initialize=t.getFormSubmitErrors=t.getFormAsyncErrors=t.getFormSyncErrors=t.getFormInitialValues=t.getFormValues=t.formValueSelector=t.focus=t.FormSection=t.Form=t.FieldArray=t.Fields=t.Field=t.destroy=t.change=t.blur=t.autofill=t.arrayUnshift=t.arraySwap=t.arraySplice=t.arrayShift=t.arrayRemoveAll=t.arrayRemove=t.arrayPush=t.arrayPop=t.arrayMove=t.arrayInsert=t.actionTypes=void 0;var o=n(448),i=r(o),a=n(63),s=r(a),u=(0,i.default)(s.default),l=u.actionTypes,c=u.arrayInsert,p=u.arrayMove,f=u.arrayPop,d=u.arrayPush,h=u.arrayRemove,_=u.arrayRemoveAll,m=u.arrayShift,y=u.arraySplice,v=u.arraySwap,g=u.arrayUnshift,b=u.autofill,M=u.blur,T=u.change,w=u.destroy,C=u.Field,E=u.Fields,O=u.FieldArray,S=u.Form,A=u.FormSection,x=u.focus,k=u.formValueSelector,P=u.getFormValues,j=u.getFormInitialValues,F=u.getFormSyncErrors,I=u.getFormAsyncErrors,L=u.getFormSubmitErrors,D=u.initialize,z=u.isDirty,N=u.isInvalid,H=u.isPristine,R=u.isValid,X=u.isSubmitting,G=u.hasSubmitSucceeded,J=u.hasSubmitFailed,V=u.propTypes,Z=u.reducer,q=u.reduxForm,U=u.registerField,W=u.reset,K=u.setSubmitFailed,B=u.setSubmitSucceeded,$=u.startAsyncValidation,Y=u.startSubmit,Q=u.stopAsyncValidation,ee=u.stopSubmit,te=u.submit,ne=u.SubmissionError,re=u.touch,oe=u.unregisterField,ie=u.untouch,ae=u.values;t.actionTypes=l,t.arrayInsert=c,t.arrayMove=p,t.arrayPop=f,t.arrayPush=d,t.arrayRemove=h,t.arrayRemoveAll=_,t.arrayShift=m,t.arraySplice=y,t.arraySwap=v,t.arrayUnshift=g,t.autofill=b,t.blur=M,t.change=T,t.destroy=w,t.Field=C,t.Fields=E,t.FieldArray=O,t.Form=S,t.FormSection=A,t.focus=x,t.formValueSelector=k,t.getFormValues=P,t.getFormInitialValues=j,t.getFormSyncErrors=F,t.getFormAsyncErrors=I,t.getFormSubmitErrors=L,t.initialize=D,t.isDirty=z,t.isInvalid=N,t.isPristine=H,t.isValid=R,t.isSubmitting=X,t.hasSubmitSucceeded=G,t.hasSubmitFailed=J,t.propTypes=V,t.reducer=Z,t.reduxForm=q,t.registerField=U,t.reset=W,t.setSubmitFailed=K,t.setSubmitSucceeded=B,t.startAsyncValidation=$,t.startSubmit=Y,t.stopAsyncValidation=Q,t.stopSubmit=ee,t.submit=te,t.SubmissionError=ne,t.touch=re,t.unregisterField=oe,t.untouch=ie,t.values=ae},465:function(e,t,n){"use strict";var r=n(16),o=n(269);r.Observable.prototype.map=o.map},569:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o);n(663);var a=function(e){var t=e.src;return i.default.createElement("div",{className:"ctrd-img",style:{background:"url("+t+") no-repeat center center"}})};a.propTypes={src:o.PropTypes.string.isRequired},t.default=a},570:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(21),u=n(47),l=function(e){var t=e.input,n=(e.meta,o(e,["input","meta"])),r=t.onChange;return t.value=t.value.toArray(),a.default.createElement(u.Dropdown,Object.assign({},t,n,{onChange:function(e,t){var n=t.value;return r(new s.List(n))},onBlur:function(){}}))};t.default=l},571:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(47),s=function(e){var t=(e.meta,e.input),n=e.options,r=e.label;return i.default.createElement(a.Form.Field,null,i.default.createElement("label",null,r),i.default.createElement("select",t,n.map(function(e){return i.default.createElement("option",{key:e.key||e.value,value:e.value},e.text)})))};t.default=s},572:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),s=n(47),u=function(e){var t=e.input,n=(e.meta,o(e,["input","meta"]));return a.default.createElement(s.Input,Object.assign({},t,n))};t.default=u},574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectItem=void 0;var r=n(29),o=n(183);t.selectItem=function(e){return(0,r.createSelector)((0,o.selectList)(),function(t){return t.find(function(t){return t.get("id")===e})})}},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listMoreCities=void 0,n(465),n(1049),n(117),n(266);var r=n(169),o=n(118),i=n(268),a=n(577),s=n(64),u=n(578),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,n=e.start,s="";return n&&(s+=", start="+n),t&&(s+=", limit="+t),s=s.substr(2),(0,r.concat)((0,o.of)((0,a.ajaxFetchStart)()),(0,i.ajax)({url:"https://skyscrapers.nurgulyashyrov.com/graphql/",body:{query:(0,u.getQuery)(),variables:JSON.stringify({selector:s})},method:"POST"}).map(function(e){return(0,a.ajaxFetchEnd)(e.response)}).catch(function(e){return(0,o.of)((0,a.ajaxFetchFail)(e))}))};t.listMoreCities=function(e){return e.ofType(s.AJAX_FETCH_END).takeWhile(function(e){var t=e.payload.data.city,n=t.getTotal,r=t.getLimit,o=t.getStart;return n>r+o}).switchMap(function(e){var t=e.payload.data.city,n=t.getLimit,r=t.getStart;return l({start:r+n})})};t.default=l},576:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=n(21),i=n(64),a=t.initialState=new o.List,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1],n=t.type,s=t.payload;switch(n){case i.AJAX_FETCH_END:return e.push.apply(e,r(s.data.city.list.map(function(e){return new o.Map(e)})));default:return e}};t.default=s},577:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialLoad=t.ajaxFetchFail=t.ajaxFetchEnd=t.ajaxFetchStart=t.changeFilterTxt=void 0;var o=n(186),i=r(o),a=n(64);t.changeFilterTxt=(0,i.default)(a.CHANGE_FILTER_TXT),t.ajaxFetchStart=(0,i.default)(a.AJAX_FETCH_START),t.ajaxFetchEnd=(0,i.default)(a.AJAX_FETCH_END),t.ajaxFetchFail=(0,i.default)(a.AJAX_FETCH_FAIL),t.initialLoad=(0,i.default)(a.INITIAL_LOAD)},578:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="query cities($selector: Selector){\n  city(s: $selector){\n    getTotal\n    getLimit\n    getStart\n    list{\n      id\n      title\n      skyscrapersCount: numChildren\n      map{\n        lat\n        lng\n      }\n    }\n  }\n}";t.getQuery=function(){return n}},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectFilterTxt=t.selectCities=void 0;var r=n(29),o=t.selectCities=function(){
return function(e){return e.get("cities")}};t.selectFilterTxt=function(){return(0,r.createSelector)(o(),function(e){return e.get("filterTxt")})}},581:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(1046),n(117);var o=n(169),i=n(118),a=n(453),s=n(61),u=n(119),l=n(120),c=n(586),p=r(c),f=a.actionTypes.CHANGE,d=function(e,t){return e.ofType(f).debounceTime(300).switchMap(function(){var e=t.getState(),n=(0,u.selectLocationPathname)()(e),r=(0,l.selectFilterSelector)()(e),a=(0,u.selectLocationSearch)()(e),c=(0,l.selectFilterUrl)()(e);return""+n+a===c?(0,p.default)(r):(0,o.concat)((0,p.default)(r),(0,i.of)((0,s.push)(c)))})};t.default=d},582:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FilterComponent=void 0;var o=n(1),i=r(o),a=n(34),s=n(29),u=n(261),l=n(47),c=n(94),p=r(c),f=n(572),d=r(f),h=n(571),_=r(h),m=n(570),y=r(m),v=n(120),g=n(185),b=l.Form.Field,M=l.Form.Group,T=t.FilterComponent=function(e){var t=e.heightOptions,n=e.yearOptions,r=e.floorsOptions,o=e.cityOptions,a=e.loading;return i.default.createElement(p.default,{raise:"2",loading:a},i.default.createElement(l.Form,null,i.default.createElement(M,{widths:"equal"},i.default.createElement(b,null,i.default.createElement(u.Field,{name:"keyword",component:d.default,placeholder:"Keyword"})),i.default.createElement(b,null,i.default.createElement(u.Field,{name:"cities",component:y.default,placeholder:"City",options:o,fluid:!0,multiple:!0,search:!0,selection:!0}))),i.default.createElement(M,{widths:"equal"},i.default.createElement(b,null,i.default.createElement(u.Field,{name:"height",component:_.default,label:"Height",options:t})),i.default.createElement(b,null,i.default.createElement(u.Field,{name:"floors",component:_.default,label:"Floors",options:r})),i.default.createElement(b,null,i.default.createElement(u.Field,{name:"year",component:_.default,label:"Year",options:n})))))},w=(0,s.createStructuredSelector)({heightOptions:(0,v.selectHeightOptions)(),floorsOptions:(0,v.selectFloorsOptions)(),yearOptions:(0,v.selectYearOptions)(),cityOptions:(0,v.selectCityOptions)(),loading:(0,g.selectLoading)()});t.default=(0,u.reduxForm)({form:"filter",initialValues:{keyword:"",height:!1,floors:!1,year:!1,cities:[]}})((0,a.connect)(w)(T))},583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initFilterForm=t.changeFilterForm=void 0;var r=n(21);n(267),n(117);var o=n(469),i=n(61),a=n(453),s=n(119),u=n(120),l=a.actionTypes.INITIALIZE,c=t.changeFilterForm=function(e,t){var n=(0,u.selectSanitizedLocationQuery)()(t.getState()),i=["keyword","cities","height","floors","year"].map(function(e){var t=n.get(e)||"";return"cities"===e&&(t=t?new r.List(t.split("|")):new r.List),(0,a.change)("filter",e,t)});return(0,o.from)(i)},p=(t.initFilterForm=function(e,t){return e.ofType(l).switchMap(function(){return c(e,t)})},function(e,t){return e.filter(function(e){var n=e.type,r=(e.payload,t.getState()),o=(0,s.selectLocationPathname)()(r),a=(0,s.selectLocationSearch)()(r),l=(0,u.selectFilterUrl)()(r);return n===i.LOCATION_CHANGE&&""+o+a!==l&&"/"===o}).switchMap(function(){return c(e,t)})});t.default=p},584:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItemComponent=void 0;var i=n(1),a=o(i),s=n(34),u=n(574),l=n(307),c=n(585),p=n(121),f=r(p),d=n(47),h=n(94),_=o(h),m=n(569),y=o(m),v=n(61),g=d.Label.Detail,b=d.Label.Group,M=t.ItemComponent=function(e){var t=e.skyscraper,n=e.city,r=e.goToPage,o=e.thumb,i=e.handleMouseEnter,s=e.handleMouseLeave,u=t.get("id"),l=t.get("height",""),p="/?height="+(0,c.getHeightFilterValue)(l),f=(0,c.getHeightPopupStr)(l),m=t.get("floors",""),v="/?floors="+(0,c.getFloorsFilterValue)(m),M=(0,c.getFloorsPopupStr)(m),T=t.get("year",""),w=10*Math.floor(T/10),C="/?year="+w,E=n?"/?cities="+n.get("id"):null,O=n?n.get("title"):null,S="https://en.wikipedia.org/wiki/index.html?curid="+t.get("wikipedia_id");return a.default.createElement(h.Group,{raise:t.get("active")?8:2,onMouseEnter:i(u),onMouseLeave:s(u)},a.default.createElement(_.default,{style:{padding:0}},a.default.createElement(y.default,{src:o,alt:t.get("title")})),a.default.createElement(_.default,null,a.default.createElement(d.Header,{as:"h4"},t.get("title"))),a.default.createElement(_.default,null,a.default.createElement(b,null,a.default.createElement(d.Popup,{trigger:a.default.createElement(d.Label,{as:"a",href:E,onClick:r(E)},a.default.createElement(d.Icon,{name:"location arrow"})," ",O),content:a.default.createElement("span",null,"See all skyscrapers in ",a.default.createElement("strong",null,O)),hideOnScroll:!0}),a.default.createElement(d.Popup,{trigger:a.default.createElement(d.Label,{as:"a",href:C,onClick:r(C)},"Year ",a.default.createElement(g,null,T)),content:a.default.createElement("span",null,"See all skyscrapers built in ",a.default.createElement("strong",null,w),"s"),hideOnScroll:!0}),a.default.createElement(d.Popup,{trigger:a.default.createElement(d.Label,{as:"a",href:v,onClick:r(v)}," Floors ",a.default.createElement(g,null,m)," "),content:M,hideOnScroll:!0}),a.default.createElement(d.Popup,{trigger:a.default.createElement(d.Label,{as:"a",href:p,onClick:r(p)},"Height ",a.default.createElement(g,null,l," ft.")),content:f,hideOnScroll:!0}))),a.default.createElement(_.default,null,a.default.createElement("a",{href:S,target:"_blank"},a.default.createElement(d.Icon,{name:"external"}),"Wikipedia")))},T=function(){return function(e,t){var n=t.skyscraper;return{city:(0,u.selectItem)(n.get("parentID"))(e),thumb:(0,l.selectThumbnailForPage)(n.get("wikipedia_id"))(e)}}},w=function(e){return{goToPage:function(t){return function(n){n.preventDefault(),e((0,v.push)(t))}},handleMouseEnter:function(t){return function(){return e(f.activateItem(t))}},handleMouseLeave:function(t){return function(){return e(f.deactivateItem(t))}}}};t.default=(0,s.connect)(T,w)(M)},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHeightFilterValue=t.getHeightPopupStr=t.getFloorsFilterValue=t.getFloorsPopupStr=void 0;var r=n(120);t.getFloorsPopupStr=function(e){var t="See all skyscrapers";return e<=20?t+" that has up to 20 floors.":e>=80?t+" that has 80 or more floors.":t+" with floors from "+(e-e%20)+" to "+(e+(20-e%20))},t.getFloorsFilterValue=function(e){return(0,r.selectFloorsOptions)()().reduce(function(t,n){return e>=80&&80===n.min?n.value:n.min<=e&&e<n.max?n.value:t},"")},t.getHeightPopupStr=function(e){var t="See all skyscrapers";return e<=250?t+" with height up to 250 ft.":e>=1e3?e+" with height more than 1000 ft.":t+" wwith height between "+(e-e%250)+" and "+(e+(250-e%250))+" ft."},t.getHeightFilterValue=function(e){return(0,r.selectHeightOptions)()().reduce(function(t,n){return e>=1e3&&1e3===n.min?n.value:n.min<=e&&e<n.max?n.value:t},"")}},586:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(466),n(267),n(266),n(117);var o=n(169),i=n(118),a=n(268),s=n(304),u=n(49),l=n(121),c=n(592),p=r(c),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,o.concat)((0,i.of)((0,l.ajaxFetchStart)()),(0,a.ajax)({url:"https://skyscrapers.nurgulyashyrov.com/graphql/",body:{query:p.default,variables:JSON.stringify({selector:e})},method:"POST"}).mergeMap(function(e){return(0,o.concat)((0,i.of)((0,l.ajaxFetchEnd)(e.response)),(0,i.of)((0,s.ajaxGetImages)(u.NAME)))}).catch(function(e){return(0,i.of)((0,l.ajaxFetchFail)(e))}))};t.default=f},587:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ListComponent=void 0;var o=n(1),i=r(o),a=n(34),s=n(29),u=n(47),l=n(184),c=n(185),p=n(584),f=r(p),d=u.Grid.Column,h=t.ListComponent=function(e){var t=e.list,n=e.loading;return i.default.createElement(u.Grid,{columns:3},!n&&t.map(function(e){return i.default.createElement(d,{key:e.get("id")},i.default.createElement(f.default,{skyscraper:e}))}))},_=(0,s.createStructuredSelector)({list:(0,l.selectList)(),loading:(0,c.selectLoading)()});t.default=(0,a.connect)(_)(h)},588:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),i=n(49),a=r(i),s=(0,o.fromJS)({id:"0",title:"",height:0,floors:0,year:0,parentID:"0",wikipedia_id:0,map:{lat:0,lng:0},architects:{list:[]},active:!1}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1],n=t.type,r=t.payload;switch(n){case a.AJAX_FETCH_END:return e.merge(r);case a.ACTIVATE_ITEM:return e.set("active",!0);case a.DEACTIVATE_ITEM:return e.set("active",!1);default:return e}};t.default=u},589:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=n(21),a=n(588),s=o(a),u=n(49),l=r(u),c=n(121),p=r(c),f=t.initialState=new i.List,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1],n=t.type,r=t.payload;switch(n){case l.AJAX_FETCH_END:return new i.List(r.data.skyscraper.list.map(function(e){return(0,s.default)(void 0,p.ajaxFetchEnd(e))}));case l.ACTIVATE_ITEM:case l.DEACTIVATE_ITEM:var o=e.findIndex(function(e){return e.get("id")===r});return o===-1?e:e.set(o,(0,s.default)(e.get(o),t));default:return e}};t.default=d},590:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=30,s=50,u={width:a,height:s,left:-a/2,top:-s},l=35,c=60,p={width:l,height:c,left:-l/2,top:-c},f=function(e){var t=e.skyscraper,n=t.get("active");return i.default.createElement("div",{className:"map-marker-w"},i.default.createElement("div",{className:n?"map-marker active":"map-marker",style:n?p:u}))};t.default=f},591:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SkyMap=void 0;var o=n(1),i=r(o),a=n(34),s=n(29),u=n(184),l=n(94),c=r(l),p=n(681),f=r(p),d=n(121),h=n(590),_=r(h);n(665);var m={lat:36.2115201,lng:-96.3318124},y=t.SkyMap=function(e){var t=e.list,n=e.handleMouseEnter,r=e.handleMouseLeave;return i.default.createElement("div",{className:"map-w"},i.default.createElement(c.default,{raise:"1",style:{position:"absolute",top:"4rem",bottom:"1rem",right:"1rem",left:"2rem"}},i.default.createElement(f.default,{defaultCenter:m,defaultZoom:4,bootstrapURLKeys:{key:"AIzaSyCq4M8-Auy3xw_8eIKjn1YsKms20iMU4Qk",v:3},onChildMouseEnter:n,onChildMouseLeave:r},t.map(function(e){return i.default.createElement(_.default,{key:e.get("id"),skyscraper:e,lat:e.getIn(["map","lat"]),lng:e.getIn(["map","lng"])})}))))},v=(0,s.createStructuredSelector)({list:(0,u.selectList)()}),g=function(e){return{handleMouseEnter:function(t){return e((0,d.activateItem)(t))},handleMouseLeave:function(t){return e((0,d.deactivateItem)(t))}}};t.default=(0,a.connect)(v,g)(y)},592:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="query skyscrapers($selector: Selector){\n  skyscraper(s: $selector){\n    getTotal\n    getLimit\n    getStart\n    list{\n      id\n      title\n      height\n      floors\n      year\n      parentID\n      wikipedia_id\n      map{\n        lat\n        lng\n      }\n      architects{\n       \tlist{\n          title\n          id\n        } \n      }\n    }\n  }\n}";t.getQuery=function(){return n};t.default=n},651:function(e,t,n){t=e.exports=n(125)(),t.push([e.id,'.ctrd-img{width:100%;background-size:cover!important}.ctrd-img:before{content:"";display:block;padding-top:100%}',""])},652:function(e,t,n){t=e.exports=n(125)(),t.push([e.id,'.map-w{position:fixed;top:0;bottom:0;right:0;left:50%}.map-marker-w{position:relative;width:0;height:0}.map-marker{-webkit-transition:all 80ms ease-in-out;transition:all 80ms ease-in-out;position:absolute;background-image:url("/sky-marker.svg");background-repeat:no-repeat;background-size:cover}.map-marker.active,.map-marker:hover{background-image:url("/sky-marker-blue.svg");z-index:100000}.map-marker:hover{cursor:pointer}',""])},661:function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var i=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create&&"~";o.prototype._events=void 0,o.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)i.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},o.prototype.emit=function(e,t,n,r,o,i){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var u,l,c=this._events[s],p=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,i),!0}for(l=1,u=new Array(p-1);l<p;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),p){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;default:if(!u)for(f=1,u=new Array(p-1);f<p;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},o.prototype.on=function(e,t,n){var o=new r(t,n||this),i=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.once=function(e,t,n){var o=new r(t,n||this,!0),i=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):this._events[i]=o,this},o.prototype.removeListener=function(e,t,n,r){var o=a?a+e:e;if(!this._events||!this._events[o])return this;var i=this._events[o],s=[];if(t)if(i.fn)(i.fn!==t||r&&!i.once||n&&i.context!==n)&&s.push(i);else for(var u=0,l=i.length;u<l;u++)(i[u].fn!==t||r&&!i[u].once||n&&i[u].context!==n)&&s.push(i[u]);return s.length?this._events[o]=1===s.length?s[0]:s:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,e.exports=o},663:[1151,651],665:function(e,t,n){var r=n(652);"string"==typeof r&&(r=[[e.id,r,""]]);n(180)(r,{});r.locals&&(e.exports=r.locals)},678:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:$}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),f=r(p),d=n(158),h=r(d),_=n(101),m=r(_),y=n(682),v=r(y),g=n(679),b=r(g),M=n(329),T=r(M),w=n(680),C=r(w),E=n(690),O=r(E),S=n(684),A=r(S),x=n(686),k=r(x),P=n(683),j=r(P),F=n(688),I=r(F),L=n(692),D=r(L),z=n(693),N=r(z),H=n(691),R=r(H),X=n(687),G=r(X),J=n(332),V=r(J),Z=n(685),q=r(Z),U=1e-5,W=256,K=100,B=300,$=3,Y=function(e){return(0,I.default)(e)?e:{lat:e[0],lng:e[1]}},Q=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n._getMinZoom=function(){if(n.geoService_.getWidth()>0||n.geoService_.getHeight()>0){var e=Math.ceil(n.geoService_.getWidth()/W)+2,t=Math.ceil(n.geoService_.getHeight()/W)+2,r=Math.max(e,t);return Math.ceil((0,R.default)(r))}return $},n._computeMinZoom=function(e,t){return e?t||$:n._getMinZoom()},n._mapDomResizeCallback=function(){if(n.resetSizeOnIdle_=!0,n.maps_){var e=n.map_.getCenter();n.maps_.event.trigger(n.map_,"resize"),n.map_.setCenter(e)}},n._setLayers=function(e){e.forEach(function(e){n.layers_[e]=new n.maps_[e],n.layers_[e].setMap(n.map_)})},n._initMap=function(){if(!n.initialized_){n.initialized_=!0;var e=Y(n.props.center||n.props.defaultCenter);n.geoService_.setView(e,n.props.zoom||n.props.defaultZoom,0),n._onBoundsChanged();var t=l({},n.props.apiKey&&{key:n.props.apiKey},n.props.bootstrapURLKeys);n.props.googleMapLoader(t).then(function(e){if(n.mounted_){var t=n.geoService_.getCenter(),r={zoom:n.props.zoom||n.props.defaultZoom,center:new e.LatLng(t.lat,t.lng)},o=(0,D.default)(e,I.default),i="function"==typeof n.props.options?n.props.options(o):n.props.options,a=u(o),s=void 0!==n.props.draggable&&{draggable:n.props.draggable},c=n._computeMinZoom(i.minZoomOverride,i.minZoom);n.minZoom_=c;var p=l({},a,{minZoom:c},i,r);n.defaultDraggableOption_=void 0!==p.draggable?p.draggable:n.defaultDraggableOption_;var d=l({},p,s);d.minZoom=n._checkMinZoom(d.minZoom,c);var _=new e.Map(h.default.findDOMNode(n.refs.google_map_dom),d);n.map_=_,n.maps_=e,n._setLayers(n.props.layerTypes);var m=n,y=n.overlay_=Object.assign(new e.OverlayView,{onAdd:function(){var e="undefined"!=typeof screen?screen.width+"px":"2000px",t="undefined"!=typeof screen?screen.height+"px":"2000px",n=document.createElement("div");this.div=n,n.style.backgroundColor="transparent",n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=e,n.style.height=t;var r=this.getPanes();r.overlayMouseTarget.appendChild(n),h.default.unstable_renderSubtreeIntoContainer(m,f.default.createElement(T.default,{experimental:m.props.experimental,onChildClick:m._onChildClick,onChildMouseDown:m._onChildMouseDown,onChildMouseEnter:m._onChildMouseEnter,onChildMouseLeave:m._onChildMouseLeave,geoService:m.geoService_,projectFromLeftTop:!0,distanceToMouse:m.props.distanceToMouse,getHoverDistance:m._getHoverDistance,dispatcher:m.markersDispatcher_}),n,function(){return m.setState({overlayCreated:!0})})},onRemove:function(){h.default.unmountComponentAtNode(this.div)},draw:function(){var t=y.div,n=y.getProjection(),r=_.getBounds(),o=r.getNorthEast(),i=r.getSouthWest(),a=n.fromLatLngToDivPixel(new e.LatLng(o.lat(),i.lng())),s=(0,A.default)().isSafari?{x:Math.round(a.x),y:Math.round(a.y)}:{x:a.x,y:a.y};m.updateCounter_++,m._onBoundsChanged(_,e,!m.props.debounced),m.googleApiLoadedCalled_||(m._onGoogleApiLoaded({map:_,maps:e}),m.googleApiLoadedCalled_=!0),t.style.left=s.x+"px",t.style.top=s.y+"px",m.markersDispatcher_&&m.markersDispatcher_.emit("kON_CHANGE")}});y.setMap(_),e.event.addListener(_,"zoom_changed",function(){if(m.geoService_.getZoom()!==_.getZoom()){m.zoomAnimationInProgress_||(m.zoomAnimationInProgress_=!0,m._onZoomAnimationStart());var t=300;(new Date).getTime()-n.zoomControlClickTime_<t?(0,N.default)(function(){return(0,N.default)(function(){m.updateCounter_++,m._onBoundsChanged(_,e)})}):(m.updateCounter_++,m._onBoundsChanged(_,e))}}),e.event.addListener(_,"idle",function(){if(n.resetSizeOnIdle_){n._setViewSize();var t=n._computeMinZoom(n.props.options.minZoomOverride,n.props.options.minZoom);t!==n.minZoom_&&(n.minZoom_=t,_.setOptions({minZoom:t})),n.resetSizeOnIdle_=!1}m.zoomAnimationInProgress_&&(m.zoomAnimationInProgress_=!1,m._onZoomAnimationEnd());var r=y.div,o=y.getProjection(),i=_.getBounds(),a=i.getNorthEast(),s=i.getSouthWest(),u=o.fromLatLngToDivPixel(new e.LatLng(a.lat(),s.lng())),l=(0,A.default)().isSafari?{x:Math.round(u.x),y:Math.round(u.y)}:{x:u.x,y:u.y};if(m.updateCounter_++,m._onBoundsChanged(_,e),n.mouse_){var c=n.geoService_.unproject(n.mouse_,!0);n.mouse_.lat=c.lat,n.mouse_.lng=c.lng}n._onChildMouseMove(),m.dragTime_=0,r.style.left=l.x+"px",r.style.top=l.y+"px",m.markersDispatcher_&&(m.markersDispatcher_.emit("kON_CHANGE"),m.fireMouseEventOnIdle_&&m.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}),e.event.addListener(_,"mouseover",function(){m.mouseInMap_=!0}),e.event.addListener(_,"click",function(){m.mouseInMap_=!0}),e.event.addListener(_,"mouseout",function(){m.mouseInMap_=!1,m.mouse_=null,m.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),e.event.addListener(_,"drag",function(){m.dragTime_=(new Date).getTime(),m._onDrag()}),e.event.addListener(_,"maptypeid_changed",function(){m._onMapTypeIdChange(_.getMapTypeId())})}}).catch(function(e){throw console.error(e),e})}},n._onGoogleApiLoaded=function(){if(n.props.onGoogleApiLoaded){var e;(e=n.props).onGoogleApiLoaded.apply(e,arguments)}},n._getHoverDistance=function(){return n.props.hoverDistance},n._onDrag=function(){var e;return n.props.onDrag&&(e=n.props).onDrag.apply(e,arguments)},n._onMapTypeIdChange=function(){var e;return n.props.onMapTypeIdChange&&(e=n.props).onMapTypeIdChange.apply(e,arguments)},n._onZoomAnimationStart=function(){var e;return n.props.onZoomAnimationStart&&(e=n.props).onZoomAnimationStart.apply(e,arguments)},n._onZoomAnimationEnd=function(){var e;return n.props.onZoomAnimationEnd&&(e=n.props).onZoomAnimationEnd.apply(e,arguments)},n._onChildClick=function(){if(n.props.onChildClick){var e;return(e=n.props).onChildClick.apply(e,arguments)}},n._onChildMouseDown=function(e,t){n.childMouseDownArgs_=[e,t],n.props.onChildMouseDown&&n.props.onChildMouseDown(e,t,l({},n.mouse_))},n._onChildMouseUp=function(){if(n.childMouseDownArgs_){if(n.props.onChildMouseUp){var e;(e=n.props).onChildMouseUp.apply(e,o(n.childMouseDownArgs_).concat([l({},n.mouse_)]))}n.childMouseDownArgs_=null,n.childMouseUpTime_=(new Date).getTime()}},n._onChildMouseMove=function(){if(n.childMouseDownArgs_&&n.props.onChildMouseMove){var e;(e=n.props).onChildMouseMove.apply(e,o(n.childMouseDownArgs_).concat([l({},n.mouse_)]))}},n._onChildMouseEnter=function(){if(n.props.onChildMouseEnter){var e;return(e=n.props).onChildMouseEnter.apply(e,arguments)}},n._onChildMouseLeave=function(){if(n.props.onChildMouseLeave){var e;return(e=n.props).onChildMouseLeave.apply(e,arguments)}},n._setViewSize=function(){if(n.mounted_){var e=h.default.findDOMNode(n.refs.google_map_dom);n.geoService_.setViewSize(e.clientWidth,e.clientHeight),n._onBoundsChanged()}},n._onWindowResize=function(){n.resetSizeOnIdle_=!0},n._onMapMouseMove=function(e){if(n.mouseInMap_){var t=(new Date).getTime(),r=50;t-n.mouseMoveTime_>r&&(n.boundingRect_=e.currentTarget.getBoundingClientRect()),n.mouseMoveTime_=t;var o=e.clientX-n.boundingRect_.left,i=e.clientY-n.boundingRect_.top;n.mouse_||(n.mouse_={x:0,y:0,lat:0,lng:0}),n.mouse_.x=o,n.mouse_.y=i;var a=n.geoService_.unproject(n.mouse_,!0);n.mouse_.lat=a.lat,n.mouse_.lng=a.lng,n._onChildMouseMove(),t-n.dragTime_<K?n.fireMouseEventOnIdle_=!0:(n.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),n.fireMouseEventOnIdle_=!1)}},n._onClick=function(){var e;return n.props.onClick&&!n.childMouseDownArgs_&&(new Date).getTime()-n.childMouseUpTime_>B&&0===n.dragTime_&&(e=n.props).onClick.apply(e,arguments)},n._onMapClick=function(e){if(n.markersDispatcher_){n._onMapMouseMove(e);var t=(new Date).getTime();t-n.dragTime_>K&&(n.mouse_&&n._onClick(l({},n.mouse_,{event:e})),n.markersDispatcher_.emit("kON_CLICK",e))}},n._onMapMouseDownNative=function(e){n.mouseInMap_&&n._onMapMouseDown(e)},n._onMapMouseDown=function(e){if(n.markersDispatcher_){var t=(new Date).getTime();t-n.dragTime_>K&&(n._onMapMouseMove(e),n.markersDispatcher_.emit("kON_MDOWN",e))}},n._onMapMouseDownCapture=function(){(0,A.default)().isChrome&&(n.mouse_||(n.zoomControlClickTime_=(new Date).getTime()))},n._onKeyDownCapture=function(){(0,A.default)().isChrome&&(n.zoomControlClickTime_=(new Date).getTime())},n._isCenterDefined=function(e){return e&&((0,I.default)(e)&&(0,G.default)(e.lat)&&(0,G.default)(e.lng)||2===e.length&&(0,G.default)(e[0])&&(0,G.default)(e[1]))},n._onBoundsChanged=function(e,t,r){if(e){var o=e.getCenter();n.geoService_.setView([o.lat(),o.lng()],e.getZoom(),0)}if((n.props.onChange||n.props.onBoundsChange)&&n.geoService_.canProject()){var i=n.geoService_.getZoom(),a=n.geoService_.getBounds(),s=n.geoService_.getCenter();if(!(0,j.default)(a,n.prevBounds_,U)&&r!==!1){var u=n.geoService_.getBounds(n.props.margin);n.props.onBoundsChange&&n.props.onBoundsChange(n.centerIsObject_?l({},s):[s.lat,s.lng],i,a,u),n.props.onChange&&n.props.onChange({center:l({},s),zoom:i,bounds:{nw:{lat:a[0],lng:a[1]},se:{lat:a[2],lng:a[3]},sw:{lat:a[4],lng:a[5]},ne:{lat:a[6],lng:a[7]}},marginBounds:{nw:{lat:u[0],lng:u[1]},se:{lat:u[2],lng:u[3]},sw:{lat:u[4],lng:u[5]},ne:{lat:u[6],lng:u[7]}},size:n.geoService_.hasSize()?{width:n.geoService_.getWidth(),height:n.geoService_.getHeight()}:{width:0,height:0}}),n.prevBounds_=a}}},n.mounted_=!1,n.initialized_=!1,n.googleApiLoadedCalled_=!1,n.map_=null,n.maps_=null,n.prevBounds_=null,n.layers_={},n.mouse_=null,n.mouseMoveTime_=0,n.boundingRect_=null,n.mouseInMap_=!0,n.dragTime_=0,n.fireMouseEventOnIdle_=!1,n.updateCounter_=0,n.markersDispatcher_=new v.default(n),n.geoService_=new k.default(W),n.centerIsObject_=(0,I.default)(n.props.center),n.minZoom_=$,n.defaultDraggableOption_=!0,n.zoomControlClickTime_=0,n.childMouseDownArgs_=null,n.childMouseUpTime_=0,n._isCenterDefined(n.props.center||n.props.defaultCenter)){var r=Y(n.props.center||n.props.defaultCenter);n.geoService_.setView(r,n.props.zoom||n.props.defaultZoom,0)}return n.zoomAnimationInProgress_=!1,n.state={overlayCreated:!1},n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted_=!0,window.addEventListener("resize",this._onWindowResize),window.addEventListener("keydown",this._onKeyDownCapture,!0);var t=h.default.findDOMNode(this.refs.google_map_dom);h.default.findDOMNode(this.refs.google_map_dom).addEventListener("mousedown",this._onMapMouseDownNative,!0),window.addEventListener("mouseup",this._onChildMouseUp,!1);var n=l({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);if(this.props.googleMapLoader(n),setTimeout(function(){e._setViewSize(),e._isCenterDefined(e.props.center||e.props.defaultCenter)&&e._initMap()},0,this),this.props.resetBoundsOnResize){var r=this;q.default.addResizeListener(t,r._mapDomResizeCallback)}}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(!this._isCenterDefined(this.props.center)&&this._isCenterDefined(e.center)&&setTimeout(function(){return t._initMap()},0),this.map_){var n=this.geoService_.getCenter();if(this._isCenterDefined(e.center)){var r=Y(e.center),o=this._isCenterDefined(this.props.center)?Y(this.props.center):null;(!o||Math.abs(r.lat-o.lat)+Math.abs(r.lng-o.lng)>U)&&Math.abs(r.lat-n.lat)+Math.abs(r.lng-n.lng)>U&&this.map_.panTo({lat:r.lat,lng:r.lng})}if(void 0!==e.zoom&&Math.abs(e.zoom-this.props.zoom)>0&&this.map_.setZoom(e.zoom),void 0!==this.props.draggable&&void 0===e.draggable?this.map_.setOptions({draggable:this.defaultDraggableOption_}):this.props.draggable!==e.draggable&&this.map_.setOptions({draggable:e.draggable}),void 0!==e.options&&!(0,m.default)(this.props.options,e.options)){var i=(0,D.default)(this.maps_,I.default),a="function"==typeof e.options?e.options(i):e.options;if(a=(0,V.default)(a,["zoom","center","draggable"]),a.hasOwnProperty("minZoom")){var s=this._computeMinZoom(a.minZoomOverride,a.minZoom);a.minZoom=this._checkMinZoom(a.minZoom,s)}this.map_.setOptions(a)}if(e.layerTypes!==this.props.layerTypes){var u=!0,l=!1,c=void 0;try{for(var p,f=Object.keys(this.layers_)[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var d=p.value;this.layers_[d].setMap(null),delete this.layers_[d]}}catch(e){l=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw c}}this._setLayers(e.layerTypes)}}}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,m.default)((0,V.default)(this.props,["draggable"]),(0,V.default)(e,["draggable"]))||!(0,m.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){this.markersDispatcher_.emit("kON_CHANGE"),this.props.hoverDistance!==e.hoverDistance&&this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}},{key:"componentWillUnmount",value:function(){this.mounted_=!1;var e=h.default.findDOMNode(this.refs.google_map_dom);window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),e.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("mouseup",this._onChildMouseUp,!1),this.props.resetBoundsOnResize&&q.default.removeResizeListener(e,this._mapDomResizeCallback),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.map_=null,this.maps_=null,this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,delete this.map_,delete this.markersDispatcher_}},{key:"_checkMinZoom",value:function(e,t){return t<e?e:t}},{key:"render",value:function(){var e=this.state.overlayCreated?null:f.default.createElement(C.default,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,projectFromLeftTop:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return f.default.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},f.default.createElement(b.default,{ref:"google_map_dom"}),e)}}]),t}(p.Component);Q.propTypes={apiKey:p.PropTypes.string,bootstrapURLKeys:p.PropTypes.any,defaultCenter:f.default.PropTypes.oneOfType([p.PropTypes.array,p.PropTypes.shape({lat:p.PropTypes.number,lng:p.PropTypes.number})]),center:f.default.PropTypes.oneOfType([p.PropTypes.array,p.PropTypes.shape({lat:p.PropTypes.number,lng:p.PropTypes.number})]),defaultZoom:p.PropTypes.number,zoom:p.PropTypes.number,onBoundsChange:p.PropTypes.func,onChange:p.PropTypes.func,onClick:p.PropTypes.func,onChildClick:p.PropTypes.func,onChildMouseDown:p.PropTypes.func,onChildMouseUp:p.PropTypes.func,onChildMouseMove:p.PropTypes.func,onChildMouseEnter:p.PropTypes.func,onChildMouseLeave:p.PropTypes.func,onZoomAnimationStart:p.PropTypes.func,onZoomAnimationEnd:p.PropTypes.func,onDrag:p.PropTypes.func,onMapTypeIdChange:p.PropTypes.func,
options:p.PropTypes.any,distanceToMouse:p.PropTypes.func,hoverDistance:p.PropTypes.number,debounced:p.PropTypes.bool,margin:p.PropTypes.array,googleMapLoader:p.PropTypes.any,onGoogleApiLoaded:p.PropTypes.func,yesIWantToUseGoogleMapApiInternals:p.PropTypes.bool,draggable:p.PropTypes.bool,style:p.PropTypes.any,resetBoundsOnResize:p.PropTypes.bool,layerTypes:p.PropTypes.arrayOf(p.PropTypes.string)},Q.defaultProps={distanceToMouse:function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},hoverDistance:30,debounced:!0,options:u,googleMapLoader:O.default,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[]},Q.googleMapLoader=O.default,t.default=Q},679:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return l.default.createElement("div",{style:c})}}]),t}(u.Component);t.default=p},680:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){return a.default.createElement("div",{style:l},a.default.createElement(u.default,o({},e,{prerender:!0})))};var i=n(1),a=r(i),s=n(329),u=r(s),l={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"}},681:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(678),i=r(o);t.default=i.default},682:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(661),l=r(u),c=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gmapInstance=e,n}return a(t,e),s(t,[{key:"getChildren",value:function(){return this.gmapInstance.props.children}},{key:"getMousePosition",value:function(){return this.gmapInstance.mouse_}},{key:"getUpdateCounter",value:function(){return this.gmapInstance.updateCounter_}},{key:"dispose",value:function(){this.gmapInstance=null,this.removeAllListeners()}}]),t}(l.default);t.default=c},683:function(e,t){"use strict";function n(e,t,n){if(e&&t){for(var r=0;r!==e.length;++r)if(Math.abs(e[r]-t[r])>n)return!1;return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},684:function(e,t){"use strict";function n(){if(r)return r;if("undefined"!=typeof navigator){var e=navigator.userAgent.indexOf("MSIE")>-1,t=navigator.userAgent.indexOf("Firefox")>-1,n=navigator.userAgent.toLowerCase().indexOf("op")>-1,o=navigator.userAgent.indexOf("Chrome")>-1,i=navigator.userAgent.indexOf("Safari")>-1;return o&&i&&(i=!1),o&&n&&(o=!1),r={isExplorer:e,isFirefox:t,isOpera:n,isChrome:o,isSafari:i}}return r={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=null},685:function(e,t){"use strict";var n,r=!("undefined"==typeof window||!window.document||!window.document.createElement);n=r?window:"undefined"!=typeof self?self:void 0;var o="undefined"!=typeof document&&document.attachEvent,i=!1;if(r&&!o){var a=function(){var e=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)};return function(t){return e(t)}}(),s=function(){var e=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout;return function(t){return e(t)}}(),u=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,o=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,o.style.width=n.offsetWidth+1+"px",o.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},l=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},c=function(e){var t=this;u(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a(function(){l(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})},p=!1,f="animation",d="",h="animationstart",_="Webkit Moz O ms".split(" "),m="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),y="";if(r){var v=document.createElement("fakeelement");if(void 0!==v.style.animationName&&(p=!0),p===!1)for(var g=0;g<_.length;g++)if(void 0!==v.style[_[g]+"AnimationName"]){y=_[g],f=y+"Animation",d="-"+y.toLowerCase()+"-",h=m[g],p=!0;break}}var b="resizeanim",M="@"+d+"keyframes "+b+" { from { opacity: 0; } to { opacity: 0; } } ",T=d+"animation: 1ms "+b+"; "}var w=function(){if(!i){var e=(M?M:"")+".resize-triggers { "+(T?T:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),i=!0}},C=function(e,t){if(void 0===e.parentNode){var n=document.createElement("div");e.parentNode=n}e=e.parentNode,o?e.attachEvent("onresize",t):(e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),w(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),u(e),e.addEventListener("scroll",c,!0),h&&e.__resizeTriggers__.addEventListener(h,function(t){t.animationName==b&&u(e)})),e.__resizeListeners__.push(t))},E=function(e,t){e=e.parentNode,o?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",c),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))};e.exports={addResizeListener:C,removeResizeListener:E}},686:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(330),u=r(s),l=n(404),c=r(l),p=n(689),f=r(p),d=function(){function e(t){o(this,e),this.hasSize_=!1,this.hasView_=!1,this.transform_=new f.default(t||512)}return a(e,[{key:"setView",value:function(e,t,n){this.transform_.center=u.default.convert(e),this.transform_.zoom=+t,this.transform_.bearing=+n,this.hasView_=!0}},{key:"setViewSize",value:function(e,t){this.transform_.width=e,this.transform_.height=t,this.hasSize_=!0}},{key:"canProject",value:function(){return this.hasSize_&&this.hasView_}},{key:"hasSize",value:function(){return this.hasSize_}},{key:"unproject",value:function(e,t){var n=void 0;if(t){var r=i({},e);r.x-=this.transform_.width/2,r.y-=this.transform_.height/2,n=this.transform_.pointLocation(c.default.convert(r))}else n=this.transform_.pointLocation(c.default.convert(e));return n.lng-=360*Math.round(n.lng/360),n}},{key:"project",value:function(e,t){if(t){var n=this.transform_.locationPoint(u.default.convert(e));return n.x-=this.transform_.worldSize*Math.round(n.x/this.transform_.worldSize),n.x+=this.transform_.width/2,n.y+=this.transform_.height/2,n}return this.transform_.locationPoint(u.default.convert(e))}},{key:"getWidth",value:function(){return this.transform_.width}},{key:"getHeight",value:function(){return this.transform_.height}},{key:"getZoom",value:function(){return this.transform_.zoom}},{key:"getCenter",value:function(){var e=this.transform_.pointLocation({x:0,y:0});return e}},{key:"getBounds",value:function(e,t){var n=e&&e[0]||0,r=e&&e[1]||0,o=e&&e[2]||0,i=e&&e[3]||0;if(this.getWidth()-r-i>0&&this.getHeight()-n-o>0){var a=this.unproject({x:i-this.getWidth()/2,y:n-this.getHeight()/2}),s=this.unproject({x:this.getWidth()/2-r,y:this.getHeight()/2-o}),u=[a.lat,a.lng,s.lat,s.lng,s.lat,a.lng,a.lat,s.lng];return t&&(u=u.map(function(e){return Math.round(e*t)/t})),u}return[0,0,0,0]}}]),e}();t.default=d},687:function(e,t){"use strict";function n(e){return!!e&&"object"===("undefined"==typeof e?"undefined":o(e))}function r(e){var t="[object Number]";return"number"==typeof e||n(e)&&i.call(e)===t}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var i=Object.prototype.toString},688:function(e,t){"use strict";function n(e){if(!e||"object"!==("undefined"==typeof e?"undefined":r(e)))return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&o(n)===o(Object)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n;var o=function(e){return Function.prototype.toString.call(e)}},689:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(330),s=r(a),u=n(404),l=r(u),c=n(331),p=function(){function e(t,n,r){o(this,e),this.tileSize=t||512,this._minZoom=n||0,this._maxZoom=r||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new s.default(0,0),this.angle=0}return i(e,[{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(e,t){return new l.default(this.lngX(e.lng,t),this.latY(e.lat,t))}},{key:"unproject",value:function(e,t){return new s.default(this.yLat(e.y,t),this.xLng(e.x,t))}},{key:"lngX",value:function(e,t){return(180+e)*(t||this.worldSize)/360}},{key:"latY",value:function(e,t){var n=180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360));return(180-n)*(t||this.worldSize)/360}},{key:"xLng",value:function(e,t){return 360*e/(t||this.worldSize)-180}},{key:"yLat",value:function(e,t){var n=180-360*e/(t||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90}},{key:"locationPoint",value:function(e){var t=this.project(e);return this.centerPoint._sub(this.point._sub(t)._rotate(this.angle))}},{key:"pointLocation",value:function(e){var t=this.centerPoint._sub(e)._rotate(-this.angle);return this.unproject(this.point.sub(t))}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom=e,this.zoom=Math.max(this.zoom,e)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom=e,this.zoom=Math.min(this.zoom,e)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new l.default(0,0)}},{key:"size",get:function(){return new l.default(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){this.angle=-(0,c.wrap)(e,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new l.default(this.x,this.y)}}]),e}();t.default=p},690:function(e,t,n){"use strict";function r(e){return o||(o=n(1072)),e?i?i:(i=new Promise(function(t,n){if("undefined"==typeof window)return void n(new Error("google map cannot be loaded outside browser env"));if(window.google&&window.google.maps)return void t(window.google.maps);"undefined"!=typeof window._$_google_map_initialize_$_&&n(new Error("google map initialization error")),window._$_google_map_initialize_$_=function(){delete window._$_google_map_initialize_$_,t(window.google.maps)};var r=Object.keys(e).reduce(function(t,n){return t+"&"+n+"="+e[n]},"");o("https://maps.googleapis.com/maps/api/js?callback=_$_google_map_initialize_$_"+r,function(){return"undefined"==typeof window.google&&n(new Error("google map initialization error (not loaded)"))})}),a(i),i):s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=null,i=void 0,a=void 0,s=new Promise(function(e){a=e})},691:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.log2?Math.log2:function(e){return Math.log(e)/Math.LN2};t.default=n},692:function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},693:function(e,t){"use strict";function n(e){if(window.requestAnimationFrame)return window.requestAnimationFrame(e);var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?t(e):window.setTimeout(e,1e3/60)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},1046:function(e,t,n){"use strict";var r=n(16),o=n(1058);r.Observable.prototype.debounceTime=o.debounceTime},1049:function(e,t,n){"use strict";var r=n(16),o=n(1063);r.Observable.prototype.takeWhile=o.takeWhile},1054:function(e,t,n){"use strict";function r(){if(f.root.XMLHttpRequest)return new f.root.XMLHttpRequest;if(f.root.XDomainRequest)return new f.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function o(){if(f.root.XMLHttpRequest)return new f.root.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(e=t[n],new f.root.ActiveXObject(e))break}catch(e){}return new f.root.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}function i(e,t){return void 0===t&&(t=null),new v({method:"GET",url:e,headers:t})}function a(e,t,n){return new v({method:"POST",url:e,body:t,headers:n})}function s(e,t){return new v({method:"DELETE",url:e,headers:t})}function u(e,t,n){return new v({method:"PUT",url:e,body:t,headers:n})}function l(e,t,n){return new v({method:"PATCH",url:e,body:t,headers:n})}function c(e,t){return new v({method:"GET",url:e,responseType:"json",headers:t}).lift(new y.MapOperator(function(e,t){return e.response},null))}var p=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},f=n(45),d=n(481),h=n(273),_=n(16),m=n(30),y=n(269);t.ajaxGet=i,t.ajaxPost=a,t.ajaxDelete=s,t.ajaxPut=u,t.ajaxPatch=l,t.ajaxGetJSON=c;var v=function(e){function t(t){e.call(this);var n={async:!0,createXHR:function(){return this.crossDomain?r.call(this):o()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)n.url=t;else for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);this.request=n}return p(t,e),t.prototype._subscribe=function(e){return new g(e,this.request)},t.create=function(){var e=function(e){return new t(e)};return e.get=i,e.post=a,e.delete=s,e.put=u,e.patch=l,e.getJSON=c,e}(),t}(_.Observable);t.AjaxObservable=v;var g=function(e){function t(t,n){e.call(this,t),this.request=n,this.done=!1;var r=n.headers=n.headers||{};n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||f.root.FormData&&n.body instanceof f.root.FormData||"undefined"==typeof n.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=this.serializeBody(n.body,n.headers["Content-Type"]),this.send()}return p(t,e),t.prototype.next=function(e){this.done=!0;var t=this,n=t.xhr,r=t.request,o=t.destination,i=new b(e,n,r);o.next(i)},t.prototype.send=function(){var e=this,t=e.request,n=e.request,r=n.user,o=n.method,i=n.url,a=n.async,s=n.password,u=n.headers,l=n.body,c=t.createXHR,p=d.tryCatch(c).call(t);if(p===h.errorObject)this.error(h.errorObject.e);else{this.xhr=p,this.setupEvents(p,t);var f=void 0;if(f=r?d.tryCatch(p.open).call(p,o,i,a,r,s):d.tryCatch(p.open).call(p,o,i,a),f===h.errorObject)return this.error(h.errorObject.e),null;if(p.timeout=t.timeout,p.responseType=t.responseType,"withCredentials"in p&&(p.withCredentials=!!t.withCredentials),this.setHeaders(p,u),f=l?d.tryCatch(p.send).call(p,l):d.tryCatch(p.send).call(p),f===h.errorObject)return this.error(h.errorObject.e),null}return p},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(f.root.FormData&&e instanceof f.root.FormData)return e;if(t){var n=t.indexOf(";");n!==-1&&(t=t.substring(0,n))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])},t.prototype.setupEvents=function(e,t){function n(e){var t=n,r=t.subscriber,o=t.progressSubscriber,i=t.request;o&&o.error(e),r.error(new T(this,i))}function r(e){var t=r,n=t.subscriber,o=t.progressSubscriber,i=t.request;if(4===this.readyState){var a=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;0===a&&(a=s?200:0),200<=a&&a<300?(o&&o.complete(),n.next(e),n.complete()):(o&&o.error(e),n.error(new M("ajax error "+a,this,i)))}}var o=t.progressSubscriber;if(e.ontimeout=n,n.request=t,n.subscriber=this,n.progressSubscriber=o,e.upload&&"withCredentials"in e){if(o){var i;i=function(e){var t=i.progressSubscriber;t.next(e)},f.root.XDomainRequest?e.onprogress=i:e.upload.onprogress=i,i.progressSubscriber=o}var a;a=function(e){var t=a,n=t.progressSubscriber,r=t.subscriber,o=t.request;n&&n.error(e),r.error(new M("ajax error",this,o))},e.onerror=a,a.request=t,a.subscriber=this,a.progressSubscriber=o}e.onreadystatechange=r,r.subscriber=this,r.progressSubscriber=o,r.request=t},t.prototype.unsubscribe=function(){var t=this,n=t.done,r=t.xhr;!n&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(m.Subscriber);t.AjaxSubscriber=g;var b=function(){function e(e,t,n){switch(this.originalEvent=e,this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.responseType){case"json":"response"in t?this.response=t.responseType?t.response:JSON.parse(t.response||t.responseText||"null"):this.response=JSON.parse(t.responseText||"null");break;case"xml":this.response=t.responseXML;break;case"text":default:this.response="response"in t?t.response:t.responseText}}return e}();t.AjaxResponse=b;var M=function(e){function t(t,n,r){e.call(this,t),this.message=t,this.xhr=n,this.request=r,this.status=n.status}return p(t,e),t}(Error);t.AjaxError=M;var T=function(e){function t(t,n){e.call(this,"ajax timeout",t,n)}return p(t,e),t}(M);t.AjaxTimeoutError=T},1056:function(e,t,n){"use strict";function r(e){var t=new s(e),n=this.lift(t);return t.caught=n}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(167),a=n(171);t._catch=r;var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.selector,this.caught))},e}(),u=function(e){function t(t,n,r){e.call(this,t),this.selector=n,this.caught=r}return o(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(a.subscribeToResult(this,n))}},t}(i.OuterSubscriber)},1057:function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(o.apply(void 0,[this].concat(e)))}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return a.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof i.Observable?e[0]:new s.ArrayObservable(e,n).lift(new u.MergeAllOperator(1))}var i=n(16),a=n(274),s=n(168),u=n(471);t.concat=r,t.concatStatic=o},1058:function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=s.async),this.lift(new u(e,t))}function o(e){e.debouncedNext()}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(30),s=n(1067);t.debounceTime=r;var u=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.dueTime,this.scheduler))},e}(),l=function(e){function t(t,n,r){e.call(this,t),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return i(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(o,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(a.Subscriber)},1063:function(e,t,n){"use strict";function r(e){return this.lift(new a(e))}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30);t.takeWhile=r;var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.index=0}return o(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):n.complete()},t}(i.Subscriber)},1067:function(e,t,n){"use strict";var r=n(474),o=n(475);t.async=new o.AsyncScheduler(r.AsyncAction)},1070:function(e,t,n){"use strict";function r(e){return!o.isArray(e)&&e-parseFloat(e)+1>=0}var o=n(170);t.isNumeric=r},1072:function(e,t,n){var r,o;!function(i,a){"undefined"!=typeof e&&e.exports?e.exports=a():(r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o)))}("$script",function(){function e(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return u;return 1}function t(t,n){e(t,function(e){return!n(e)})}function n(i,a,s){function u(e){return e.call?e():f[e]}function c(){if(!--v){f[y]=1,m&&m();for(var n in h)e(n.split("|"),u)&&!t(h[n],u)&&(h[n]=[])}}i=i[l]?i:[i];var p=a&&a.call,m=p?a:s,y=p?i.join(""):a,v=i.length;return setTimeout(function(){t(i,function e(t,n){return null===t?c():(n||/^https?:\/\//.test(t)||!o||(t=t.indexOf(".js")===-1?o+t+".js":o+t),_[t]?(y&&(d[y]=1),2==_[t]?c():setTimeout(function(){e(t,!0)},0)):(_[t]=1,y&&(d[y]=1),void r(t,c)))})},0),n}function r(e,t){var n,r=a.createElement("script");r.onload=r.onerror=r[p]=function(){r[c]&&!/^c|loade/.test(r[c])||n||(r.onload=r[p]=null,n=1,_[e]=2,t())},r.async=1,r.src=i?e+(e.indexOf("?")===-1?"?":"&")+i:e,s.insertBefore(r,s.lastChild)}var o,i,a=document,s=a.getElementsByTagName("head")[0],u=!1,l="push",c="readyState",p="onreadystatechange",f={},d={},h={},_={};return n.get=r,n.order=function(e,t,r){!function o(i){i=e.shift(),e.length?n(i,o):n(i,t,r)}()},n.path=function(e){o=e},n.urlArgs=function(e){i=e},n.ready=function(r,o,i){r=r[l]?r:[r];var a=[];return!t(r,function(e){f[e]||a[l](e)})&&e(r,function(e){return f[e]})?o():!function(e){h[e]=h[e]||[],h[e][l](o),i&&i(a)}(r.join("|")),n},n.done=function(e){n([null],e)},n})},1151:function(e,t,n,r){var o=n(r);"string"==typeof o&&(o=[[e.id,o,""]]);n(180)(o,{});o.locals&&(e.exports=o.locals)}});
//# sourceMappingURL=1.128443e7.chunk.js.map